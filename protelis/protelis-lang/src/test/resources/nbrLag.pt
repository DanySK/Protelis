import protelis:coord:spreading
let res =
    alignedMap(
        nbr([["foo", "bar"], ["bar", "foo"]]),
        (key, filter) -> { true },
        (key, filter) -> { minHood(nbrLag()) },
        Infinity
    );
minHood(self.nbrLag())
    + minHood(nbrLag())
    + if (res == Infinity) { Infinity }
      else { res.get(0).get(1) + res.get(1).get(1) }